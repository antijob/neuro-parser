# Администрирование проекта

Здесь описаны некоторые функции которые могут быть не очевидны, но важны для использования проекта в случае самостоятельной установки.

## Рассылка сообщений в бот

В этом проекте реализована возможность для администраторов рассылать сообщения в несколько каналов через панель администратора Django.

### Как использовать

Инструкции для разработчиков и настройки проекта для локальной и продакшен среды можно найти в файле [DEVELOPERS.md](DEVELOPERS.md).

#### 1. Выбор каналов

1. Перейдите в панель администратора Django вашего проекта.
2. Откройте список каналов (`Channel`).
3. Выберите каналы, в которые вы хотите отправить сообщение.

#### 2. Использование функции рассылки

1. После выбора каналов выберите действие "Отправить сообщение в выбранные каналы" из выпадающего списка действий.
2. Нажмите кнопку "Применить".
3. На новой странице введите текст сообщения и подтвердите выбранные каналы.
4. Нажмите кнопку для отправки сообщения.

#### 3. Обработка сообщений

- Если каналы не выбраны, вы получите предупреждение "Каналы не выбраны".
- После успешной отправки вы получите сообщение с указанием количества каналов, в которые было отправлено сообщение.
- В случае возникновения ошибки при отправке вы получите уведомление в панели администратора.


## Отключение отдельных моделей для конкретных чатов

Существует возможность скрывать каждую отдельную категорию для каждого канала. Это может быть связанно с необходимостью разделения моделей или требованиями безопасности.


#### Скачивание инцидентов в csv

1. Перейдите во вкладку "Инциденты из СМИ".
2. В левой части настройте нужные фильтры.
3. Выберите нужные инциденты и в выпадающей панели "Action" используйте "Экспортировать выбранные записи в CSV"


### Как использовать

Для этого нужно зайти в панели администратора в `Channel incident types`, найти запись с нужным типом инцидента и ID канала и открыть. В настройках теперь появилось поле **show**. Если оно включено, то категория отображается в настройках канала в Telegram. Если выключено, то категория не показывается.

### Особенности

- При выключении поля **show** также отключается поле **status**. Это означает, что если мы скрываем категорию для канала, то инциденты из этой категории больше не приходят в этот канал.


